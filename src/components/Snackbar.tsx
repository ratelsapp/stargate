import { useAppSelector } from "store/hooks";
import { Fade, Box } from "@mui/material";
import MuiSnackbar from "@mui/material/Snackbar";
import { MessageTypes } from "types/tips";
import { useTips } from "hooks/useTips";

function SuccessIcon() {
  return (
    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path
        d="M12 2.66626C13.4498 2.66626 14.8211 2.99681 16.0451 3.58699C16.1288 3.62165 16.2046 3.67303 16.2678 3.73797C16.331 3.80291 16.3803 3.88005 16.4126 3.96469C16.445 4.04932 16.4598 4.13966 16.4561 4.2302C16.4523 4.32074 16.4302 4.40957 16.391 4.49126C16.3518 4.57295 16.2963 4.64578 16.228 4.70532C16.1597 4.76485 16.08 4.80983 15.9937 4.83751C15.9074 4.86519 15.8164 4.87498 15.7262 4.8663C15.636 4.85761 15.5485 4.83062 15.4691 4.78699H15.4669C13.8652 4.01707 12.0528 3.80241 10.3155 4.17688C8.57829 4.55136 7.01522 5.49364 5.87294 6.85504C4.73067 8.21644 4.07424 9.91944 4.00724 11.6953C3.94024 13.4712 4.46649 15.2188 5.50294 16.6624C6.53939 18.106 8.02702 19.1634 9.7311 19.6677C11.4352 20.172 13.2587 20.0945 14.9138 19.4475C16.569 18.8004 17.9615 17.6206 18.8718 16.0943C19.782 14.568 20.1581 12.782 19.9407 11.0183C19.9173 10.85 19.9589 10.6791 20.0573 10.5405C20.1556 10.4019 20.3031 10.3061 20.4697 10.2726C20.6364 10.2392 20.8094 10.2707 20.9536 10.3606C21.0978 10.4505 21.2022 10.5921 21.2455 10.7564H21.2509C21.504 12.6387 21.1768 14.5534 20.3131 16.2448C19.4494 17.9362 18.0903 19.324 16.4172 20.2227C14.7441 21.1214 12.8367 21.4884 10.9496 21.2746C9.06246 21.0608 7.28546 20.2764 5.85584 19.0261C4.42622 17.7759 3.412 16.1193 2.94861 14.2775C2.48521 12.4357 2.59469 10.4964 3.26242 8.71844C3.93015 6.9405 5.12435 5.40856 6.6856 4.32715C8.24684 3.24574 10.1008 2.66632 12 2.66626ZM21.0218 5.4568L21.2138 5.6499C21.3818 5.8179 21.3698 6.08408 21.1942 6.26081L12.7746 14.6673C12.6445 14.7924 12.4701 14.8607 12.2896 14.8573C12.1092 14.8538 11.9375 14.7788 11.8124 14.6488L8.14256 10.9833C8.06086 10.9056 8.01086 10.8004 8.00219 10.688C7.99353 10.5756 8.02682 10.4639 8.09565 10.3746L8.43819 9.94153C8.50704 9.85546 8.60523 9.79784 8.71395 9.77972C8.82267 9.7616 8.93425 9.78426 9.02728 9.84335L11.9967 11.8255C12.1538 11.9303 12.4222 11.9161 12.5695 11.7983L20.4131 5.4339C20.5006 5.36493 20.6098 5.32937 20.7211 5.33356C20.8325 5.33776 20.9387 5.38145 21.0207 5.4568H21.0218Z"
        fill="#6CCC4F"
      />
    </svg>
  );
}

function ErrorIcon() {
  return (
    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path
        d="M13.1422 11.9956L15.4352 14.2886C15.5115 14.3636 15.5721 14.453 15.6137 14.5517C15.6552 14.6503 15.6769 14.7561 15.6773 14.8631C15.6777 14.9701 15.657 15.0762 15.6162 15.1751C15.5755 15.2741 15.5156 15.364 15.4399 15.4396C15.3642 15.5153 15.2743 15.5752 15.1754 15.616C15.0764 15.6567 14.9704 15.6775 14.8634 15.6771C14.7564 15.6766 14.6505 15.655 14.5519 15.6134C14.4533 15.5719 14.3639 15.5112 14.2888 15.4349L11.9959 13.142L9.70293 15.4349C9.62788 15.5112 9.53848 15.5719 9.43987 15.6134C9.34126 15.655 9.23539 15.6766 9.12838 15.6771C9.02137 15.6775 8.91534 15.6567 8.81639 15.616C8.71744 15.5752 8.62754 15.5153 8.55187 15.4396C8.47621 15.364 8.41627 15.2741 8.37552 15.1751C8.33477 15.0762 8.31402 14.9701 8.31446 14.8631C8.3149 14.7561 8.33652 14.6503 8.37808 14.5517C8.41964 14.453 8.48031 14.3636 8.55659 14.2886L10.8495 11.9956L8.55659 9.70268C8.48031 9.62764 8.41964 9.53823 8.37808 9.43962C8.33652 9.34101 8.3149 9.23515 8.31446 9.12814C8.31402 9.02113 8.33477 8.91509 8.37552 8.81615C8.41627 8.7172 8.47621 8.6273 8.55187 8.55163C8.62754 8.47596 8.71744 8.41603 8.81639 8.37528C8.91534 8.33453 9.02137 8.31378 9.12838 8.31422C9.23539 8.31465 9.34126 8.33628 9.43987 8.37783C9.53848 8.41939 9.62788 8.48006 9.70293 8.55635L11.9959 10.8493L14.2888 8.55635C14.3639 8.48006 14.4533 8.41939 14.5519 8.37783C14.6505 8.33628 14.7564 8.31465 14.8634 8.31422C14.9704 8.31378 15.0764 8.33453 15.1754 8.37528C15.2743 8.41603 15.3642 8.47596 15.4399 8.55163C15.5156 8.6273 15.5755 8.7172 15.6162 8.81615C15.657 8.91509 15.6777 9.02113 15.6773 9.12814C15.6769 9.23515 15.6552 9.34101 15.6137 9.43962C15.5721 9.53823 15.5115 9.62764 15.4352 9.70268L13.1422 11.9956Z"
        fill="#CC4F4F"
      />
      <path
        fillRule="evenodd"
        clipRule="evenodd"
        d="M11.9999 19.7144C16.2603 19.7144 19.7141 16.2606 19.7141 12.0001C19.7141 7.73962 16.2603 4.28582 11.9999 4.28582C7.73938 4.28582 4.28557 7.73962 4.28557 12.0001C4.28557 16.2606 7.73938 19.7144 11.9999 19.7144ZM11.9999 21.4287C17.2071 21.4287 21.4284 17.2074 21.4284 12.0001C21.4284 6.79285 17.2071 2.57153 11.9999 2.57153C6.7926 2.57153 2.57129 6.79285 2.57129 12.0001C2.57129 17.2074 6.7926 21.4287 11.9999 21.4287Z"
        fill="#CC4F4F"
      />
    </svg>
  );
}

function Message({ message, type }: { message: string; type: MessageTypes }) {
  return (
    <Box sx={{ display: "flex", alignItems: "center" }}>
      <Box sx={{ display: "flex", alignItems: "center", margin: "0 10px 0 0" }}>
        {type === "success" ? <SuccessIcon></SuccessIcon> : <ErrorIcon></ErrorIcon>}
      </Box>
      {message}
    </Box>
  );
}

export default function Snackbar() {
  const { open, type, message } = useAppSelector((state) => state.snackbar);

  const [, close] = useTips();

  return (
    <MuiSnackbar
      anchorOrigin={{ vertical: "top", horizontal: "right" }}
      open={open}
      autoHideDuration={4000}
      onClose={close}
      message={<Message message={message} type={type} />}
      TransitionComponent={Fade}
    ></MuiSnackbar>
  );
}
